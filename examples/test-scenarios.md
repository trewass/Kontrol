# –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è Kontrol

## –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ Telegram

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –≥—Ä—É–ø–ø–µ

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É:
   ```
   –ü–µ—Ç—è, —Å–æ–∑–≤–æ–Ω–∏—Å—å —Å –ò–≤–∞–Ω–æ–≤—ã–º –¥–æ –ø—è—Ç–Ω–∏—Ü—ã, –æ–Ω —Ö–æ—á–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å —Ü–≤–µ—Ç —Ñ–∞—Å–∞–¥–æ–≤ –Ω–∞ –≤–µ–Ω–≥–µ
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–¥–∞—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º —á–∞—Ç–µ –∑–∞–¥–∞—á
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–°–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è —Å –ò–≤–∞–Ω–æ–≤—ã–º –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ü–≤–µ—Ç–∞ —Ñ–∞—Å–∞–¥–æ–≤"
- –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å: –ü–µ—Ç—è
- –ö–ª–∏–µ–Ω—Ç: –ò–≤–∞–Ω–æ–≤
- –¢–µ–≥–∏: —Å–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è, —Ñ–∞—Å–∞–¥—ã, —Ü–≤–µ—Ç
- –°—Ä–æ–∫: "–¥–æ –ø—è—Ç–Ω–∏—Ü—ã"
- 5 –∫–Ω–æ–ø–æ–∫: –í–∑—è–ª / –£—Ç–æ—á–Ω–∏—Ç—å / –ü–µ—Ä–µ–Ω—ë—Å / –ó–∞–∫—Ä—ã–ª / –ù–µ –∑–∞–¥–∞—á–∞

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–∑—è—Ç–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–±–æ—Ç—É

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É (—Å–º. –°—Ü–µ–Ω–∞—Ä–∏–π 1)
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚úÖ –í–∑—è–ª"

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "üîµ –í —Ä–∞–±–æ—Ç–µ"
- –í –∫–∞—Ä—Ç–æ—á–∫–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è "üë∑ –í–∑—è–ª: @username"
- –í –ë–î task.status = IN_PROGRESS
- –í task_events –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å STATUS_CHANGED

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ "–Ω–µ –∑–∞–¥–∞—á–∏"

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–ª—É–¥–∞ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ —á–∞—Ç–∞

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É:
   ```
   –ö–∞–∫ –¥—É–º–∞–µ—à—å, –∫–∞–∫–æ–π —Ü–≤–µ—Ç –ª—É—á—à–µ?
   ```
2. LLM —Å–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á—É —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é (–Ω–µ –¥–æ–ª–∂–Ω–∞ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å—Å—è)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–¥–∞—á–∞ –ù–ï –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º —á–∞—Ç–µ
- –í –ª–æ–≥–∞—Ö: "Not a task or low confidence: 0.1"

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –≤—Å—ë –∂–µ —Å–æ–∑–¥–∞–ª–∞—Å—å):**
1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "üß® –ù–µ –∑–∞–¥–∞—á–∞"
2. –°–æ–æ–±—â–µ–Ω–∏–µ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —á–∞—Ç–∞
3. task.status = REJECTED

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –Ω–µ–≤–∑—è—Ç–æ–π –∑–∞–¥–∞—á–µ

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–®–∞–≥–∏:**
1. –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 30 –º–∏–Ω—É—Ç (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å `REMIND_NEW_MINUTES=1` –≤ .env)
3. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –∑–∞–ø—É—Å–∫–∞ cron (–∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í –≥–ª–∞–≤–Ω–æ–º —á–∞—Ç–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:
  ```
  ‚ö†Ô∏è –ó–∞–¥–∞—á–∞ –Ω–µ –≤–∑—è—Ç–∞!

  –°–æ–∑–≤–æ–Ω–∏—Ç—å—Å—è —Å –ò–≤–∞–Ω–æ–≤—ã–º –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é —Ü–≤–µ—Ç–∞ —Ñ–∞—Å–∞–¥–æ–≤

  –°–æ–∑–¥–∞–Ω–∞: 01.01.2025, 10:00
  ```
- –í –ë–î task.lastRemindedAt –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—è)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü–∏—é –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ä–∞–±–æ—á—É—é –≥—Ä—É–ø–ø—É:
   ```
   üé§ "–ù–∞–¥–æ —Å—Ä–æ—á–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–≤–æ–¥—á–∏–∫–∏ –Ω–∞ –∫—É—Ö–æ–Ω–Ω—ã–π –≥–∞—Ä–Ω–∏—Ç—É—Ä —É –°–∏–¥–æ—Ä–æ–≤—ã—Ö, –∞–¥—Ä–µ—Å –°–∞–¥–æ–≤–∞—è –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å"
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í –ª–æ–≥–∞—Ö: "Transcribed voice: –ù–∞–¥–æ —Å—Ä–æ—á–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–≤–æ–¥—á–∏–∫–∏ –Ω–∞ –∫—É—Ö–æ–Ω–Ω—ã–π –≥–∞—Ä–Ω–∏—Ç—É—Ä —É –°–∏–¥–æ—Ä–æ–≤—ã—Ö, –∞–¥—Ä–µ—Å –°–∞–¥–æ–≤–∞—è –¥–≤–µ–Ω–∞–¥—Ü–∞—Ç—å"
- –ó–∞–¥–∞—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º —á–∞—Ç–µ –∑–∞–¥–∞—á
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–æ–≤–æ–¥—á–∏–∫–∏ –Ω–∞ –∫—É—Ö–æ–Ω–Ω—ã–π –≥–∞—Ä–Ω–∏—Ç—É—Ä"
- –ö–ª–∏–µ–Ω—Ç: –°–∏–¥–æ—Ä–æ–≤—ã
- –û–±—ä–µ–∫—Ç: –°–∞–¥–æ–≤–∞—è 12
- –¢–µ–≥–∏: –¥–æ–≤–æ–¥—á–∏–∫–∏, –∫—É—Ö–Ω—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (üé§)
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∞—É–¥–∏–æ —Ñ–∞–π–ª–æ–≤ (üéµ)
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∏–¥–µ–æ –∫—Ä—É–∂–∫–æ–≤ (üî¥)

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 6: Wazzup webhook (WhatsApp)

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ WhatsApp

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å POST –∑–∞–ø—Ä–æ—Å:
   ```bash
   curl -X POST http://localhost:3000/wazzup/webhook \
     -H "Content-Type: application/json" \
     -d @examples/wazzup-webhook-incoming.json
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–¥–∞—á–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≥–ª–∞–≤–Ω–æ–º —á–∞—Ç–µ
- –ò—Å—Ç–æ—á–Ω–∏–∫: "WAZZUP (WhatsApp)"
- –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ü–æ–º–µ–Ω—è—Ç—å —Ç–∏–ø–æ–Ω –Ω–∞ –¥–≤–µ—Ä–∏ –≤ –æ—Ñ–∏—Å–µ –Ω–∞ –õ–µ–Ω–∏–Ω–∞ 5"

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 7: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram –≥—Ä—É–ø–ø—É
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ—Ç –∂–µ –∑–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä–Ω–æ (–∏–ª–∏ webhook —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–≤–∞–∂–¥—ã)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Ç–æ—Ä–∞—è –∑–∞–¥–∞—á–∞ –ù–ï —Å–æ–∑–¥–∞—ë—Ç—Å—è
- –í –ª–æ–≥–∞—Ö: "Task already exists (duplicate)"

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 8: –í–µ–±-–∞–¥–º–∏–Ω

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á –≤ –±—Ä–∞—É–∑–µ—Ä–µ

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å http://localhost:3000/admin
2. –í—ã–±—Ä–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä "üîµ –í —Ä–∞–±–æ—Ç–µ"
3. –í–≤–µ—Å—Ç–∏ –≤ –ø–æ–∏—Å–∫ "–ò–≤–∞–Ω–æ–≤"
4. –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ –∑–∞–¥–∞—á—É

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
  - –í—Å–µ –ø–æ–ª—è –∑–∞–¥–∞—á–∏
  - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (events)

---

## –°—Ü–µ–Ω–∞—Ä–∏–π 9: –°—Ä–æ—á–Ω–∞—è –∑–∞–¥–∞—á–∞ –±–µ–∑ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç HIGH

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:
   ```
   –°–†–û–ß–ù–û! –ó–∞–º–µ—Ä –Ω–∞ —É–ª. –õ–µ–Ω–∏–Ω–∞ 5 –∑–∞–≤—Ç—Ä–∞ –∫ 10:00
   ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–¥–∞—á–∞ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —Å –º–µ—Ç–∫–æ–π "üî• –°–†–û–ß–ù–û"
- priority = HIGH
- due_text = "–∑–∞–≤—Ç—Ä–∞ –∫ 10:00"
- assignee = null (–º–æ–∂–µ—Ç –≤–∑—è—Ç—å –ª—é–±–æ–π)

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ curl (–±–µ–∑ Telegram)

### –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ webhook:

```bash
curl -X POST http://localhost:3000/telegram/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "update_id": 123,
    "message": {
      "message_id": 456,
      "from": {"id": 789, "username": "test_user", "first_name": "Test"},
      "chat": {"id": -1001111111111, "type": "group", "title": "Test Group"},
      "date": 1704110400,
      "text": "–†–∞—Å–ø–∏–ª–∏—Ç—å –î–°–ü 2800x600 –±–µ–ª—ã–π, –Ω—É–∂–Ω–æ –∫ –ø—è—Ç–Ω–∏—Ü–µ"
    }
  }'
```

### –ò–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏:

```bash
curl -X POST http://localhost:3000/telegram/webhook \
  -H "Content-Type: application/json" \
  -d '{
    "update_id": 124,
    "callback_query": {
      "id": "123",
      "from": {"id": 789, "username": "test_user"},
      "message": {"message_id": 100, "chat": {"id": -1009999999999}},
      "data": "took:clz1x2y3z4a5b6c7d8e9f0g1"
    }
  }'
```

---

## –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] Telegram –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤–æ –≤—Å–µ —Ä–∞–±–æ—á–∏–µ –≥—Ä—É–ø–ø—ã
- [ ] Privacy mode –æ—Ç–∫–ª—é—á–µ–Ω (/setprivacy ‚Üí Disable)
- [ ] Webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω (getWebhookInfo –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π URL)
- [ ] –ì–ª–∞–≤–Ω—ã–π —á–∞—Ç –∑–∞–¥–∞—á —Å–æ–∑–¥–∞–Ω –∏ bot –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –∞–¥–º–∏–Ω
- [ ] LLM API —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å balance/quota)
- [ ] –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (prisma migrate deploy)
- [ ] Redis –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] –í–µ–±-–∞–¥–º–∏–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ /admin
- [ ] –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å logs —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç)
- [ ] Wazzup webhook –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!** üöÄ
